---
version: 5
defaults:
  datadir: data
  data_hash: yaml_data

hierarchy:
  - name: 'Environment data'
    lookup_key: eyaml_lookup_key
    paths:
      - 'nodes/%{::fqdn}.yaml'
      - 'location/%{::location}/%{::role}.yaml'
      - 'role/%{::tier}/%{::role}.yaml'
      - 'role/%{::role}.yaml'
      - 'location/%{::location}.yaml'
      - 'common.yaml'
    options:
      pkcs7_private_key: '/etc/puppetlabs/puppet/keys/private_key.pkcs7.pem'
      pkcs7_public_key:  '/etc/puppetlabs/puppet/keys/public_key.pkcs7.pem'
      
classes:
    - rsnapshot

rsnapshot::snapshot_root: '/backup/rsnapshot'
rsnapshot::backups:
    - '/etc/': 'backup.domain.com/'
    - '/var/backups/local/': 'backup.domain.com/'
    - 'root@server.domain.com:/etc/': 'server.domain.com/'
rsnapshot::retains:
    - daily: 7
    - weekly: 4
    - monthly: 6
rsnapshot::crons:
    daily:
        minute: 0
        hour: 10
    weekly:
        minute: 0
        hour: 12
        weekday: 3
    monthly:
        minute: 0
        hour: 14
        monthday: 1
